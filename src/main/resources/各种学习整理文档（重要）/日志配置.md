## 1、Log4j2实现日志输出

一、说明

　　如果是使用slf4j规范的，请先引用：

```
<dependency>            		  
	<groupId>org.apache.logging.log4j</groupId>    
	<artifactId>log4j-slf4j-impl</artifactId>
    <version>2.11.0</version>
</dependency>
```

二、测试类

```
import org.junit.Test;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;


public class LogTest {
    @Test
    public void test() {
        Logger log = LoggerFactory.getLogger(LogTest.class);
        log.warn("this is message {}", 1);
        Exception ex = new Exception("this is a message.");
        log.error("a new exeception", ex);
        log.trace("trace message.");
        log.info("info message.");
        for (int i = 0; i < 120000; i++)
            log.debug("debug message:{}={}", "line", i);
    }
}
```

三、配置

　　在Maven项目的resources目录下，或者Java项目的src下，新建log4j2.xml文件。这里要注意，如果是使用的log4j1版本，请添加log4j.properties文件并配置，但是在log4j2中已经废弃了log4j.properties文件的使用，使用的是log4j2.xml。参考如下内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration status="ON">
    <appenders>
        <Console name="Console" target="SYSTEM_OUT">
            <PatternLayout pattern="%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n"/>
        </Console>
        <RollingFile name="RollingFile" fileName="logs/app.log"
                     filePattern="logs/$${date:yyyy-MM}/app-%d{MM-dd-yyyy}-%i.log.gz">
            <PatternLayout pattern="%d{yyyy.MM.dd 'at' HH:mm:ss z} %-5level %class{36} %L %M - %msg%xEx%n"/>
            <SizeBasedTriggeringPolicy size="5 MB" />
        </RollingFile>
    </appenders>
    <loggers>
        <root level="DEBUG">
            <appender-ref ref="Console"/>
            <appender-ref ref="RollingFile"/>
        </root>
    </loggers>
</configuration>
```

　说明：上面配置的最低Level为DEBUG，同时使用了Console和RollingFile两种输出方式。所以输出的日志，一方面输出到控制台，一方面输出到logs/app.log中，当app.log达到5MB时，就会自动生成gz压缩文件到/logs下，并清空app.log，继续输出到app.log，以此循环。